nextflow_process {

    name "Test Process CHECK_AND_MODIFY_READS"
    script "modules/local/check_and_modify_reads/main.nf"
    process "CHECK_AND_MODIFY_READS"

    test("Should run without failures") {

        when {
            params {
                outdir = "tests/results"
            }
            process {
                """
                input[0] = [
                    [id:'SRR3960572', assembly_accession:'ERZ505209'],  // meta
                    [ 
                        file("${moduleDir}/tests/test_1.fq.gz", checkIfExists: true), 
                        file("${moduleDir}/tests/test_2.fq.gz", checkIfExists: true)
                    ]
                ]
                """
            }
        }

        then {
            assert process.success
            assert snapshot(process.out).match()
        }

    }

}
